<html>
  <head>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">
    <link rel="stylesheet" href="./auto-complete.css">
    <script src="./auto-complete.min.js"></script>
  </head>
  <body>
 <div class="container">
      <div class="header clearfix">
        <h3 class="text-muted">Website!</h3>
      </div>

      <div class="jumbotron">
        <h1>Trade Magic Cards</h1>
        <p>
          <div class="input-group input-group-lg">
            <input id="search_button" type="text" class="form-control" placeholder="e.g. Grizzly Bear">
            <span class="input-group-btn">
              <button class="btn btn-default" onclick=loadCard() type="button">Search!</button>
            </span>
          </div>
        </p>
      </div>
      <center>
        <img id="card_img"/>
      </center>
    </div>

  </body>
  <script src="./cardNames.js"></script>
  <script src="./AllSets.js"></script>
  <script> 
    function loadCard() {
      console.log('loading card');
      var cardName = document.getElementById('search_button').value;
      var keys = Object.keys(allsets);
      var multiverseid;
      keys.forEach(function(key) {
        allsets[key].cards.forEach(function(card) {
          if(card.name === cardName) {
            console.log(card.name);
            console.log(card.multiverseid);
            multiverseid = card.multiverseid;
          }
        });
      });
      // load card
      document.getElementById("card_img").src = "http://gatherer.wizards.com/Handlers/Image.ashx?multiverseid=" + multiverseid + "&type=card"
    }
    var my_autocomplete = new autoComplete({
      selector: 'input',
      minChars: 2,
      source: function(term, suggest) {
        term = term.toLowerCase();
        var choices = cards;
        var matches = [];
        choices.forEach(function(choice) {
          if(~choice.toLowerCase().indexOf(term)) {
            matches.push(choice);
          }
        });
        suggest(matches);
      }
    });
  </script>
</html>
